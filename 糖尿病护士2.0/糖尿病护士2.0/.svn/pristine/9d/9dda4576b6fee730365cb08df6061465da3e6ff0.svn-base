//
//  MyDatePickerView.m
//  TangNiaoBingHuShi
//
//  Created by Jason on 14-11-20.
//  Copyright (c) 2014年 Jason. All rights reserved.
//

#import "MyDatePickerView.h"

@interface MyDatePickerView ()
{

    UIView *_pickerBackgroundView;
}
@end
@implementation MyDatePickerView
- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        
        _datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 30, SCREEN_WIDTH, 400)];
        _datePicker.datePickerMode = UIDatePickerModeDate;
        _datePicker.backgroundColor = [UIColor whiteColor];
        
        _datePicker.userInteractionEnabled = YES;
        [self addSubview:_datePicker];
        UIButton *button = [UIButton buttonWithType:UIButtonTypeSystem];
        button.backgroundColor = [UIColor grayColor];
        button.frame = CGRectMake(self.frame.size.width - 60, 0, 60, 30);
        [button setTitle:@"确认" forState:UIControlStateNormal];
        
        [button addTarget:self action:@selector(confirmBtnAction:) forControlEvents:UIControlEventTouchUpInside];
        UIButton *cancelBtn = [UIButton buttonWithType:UIButtonTypeSystem];
        cancelBtn.frame = CGRectMake(0, 0, 60, 30);
        [cancelBtn setTitle:@"取消" forState:UIControlStateNormal];
        cancelBtn.backgroundColor = [UIColor grayColor];
        [cancelBtn addTarget:self action:@selector(cancelBtnAction:) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:button];
        [self addSubview:cancelBtn];
//
//        _pickerBackgroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, SCREEN_WIDTH, 400)];
//        _pickerBackgroundView.hidden = YES;
//        _pickerBackgroundView.backgroundColor = [UIColor whiteColor];
//        [self addSubview:_pickerBackgroundView];
//        [_pickerBackgroundView addSubview:_datePicker];
//        [_pickerBackgroundView addSubview:button];
//        [_pickerBackgroundView addSubview:cancelBtn];
    }
    return self;
}
-(void)valueOfHiddenBlock:(HIDDENVIEW)hiddenBlock
{
    self.hiddenBlock = hiddenBlock;
}
-(void)valueOfBlock:(DATEBLOCK)block
{
    self.dateBlock = block;
}
-(void)valueOfDatePicker:(TWODATEBLOCK)twoBlock
{
    self.datePickerBlock = twoBlock;
}
#pragma  mark- 时间轴取消方法
-(void)cancelBtnAction:(UIButton *)button
{
    self.hiddenBlock();
}
#pragma  mark- 时间确认方法
-(void)confirmBtnAction:(UIButton *)button
{

    
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"YYYY-MM-dd"];
    NSString *date = [formatter stringFromDate:_datePicker.date];
    self.dateBlock(date);
    self.datePickerBlock(_datePicker);
    self.hiddenBlock();
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect {
    // Drawing code
}
*/

@end
