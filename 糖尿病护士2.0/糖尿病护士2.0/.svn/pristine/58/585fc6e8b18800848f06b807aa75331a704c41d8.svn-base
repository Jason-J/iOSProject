//
//  BloodRecordView.m
//  TangNiaoBingHuShi
//
//  Created by Jason on 14-12-16.
//  Copyright (c) 2014年 Jason. All rights reserved.
//

#import "BloodRecordView.h"
#import "Blood.h"
@implementation BloodRecordView

- (void)awakeFromNib {
    // Initialization code
    _tableViewMArr = [[NSMutableArray alloc] init];
    _tableView.delegate = self;
    _tableView.dataSource = self;
    _tableView.separatorInset = UIEdgeInsetsMake(0, 20, 0, 20);
    _tableView.separatorColor = RGB(237, 237, 237);
    _tableView.rowHeight = 28;
}
-(void)setBloodRecord:(BloodRecord *)bloodRecord
{
    if (_bloodRecord !=bloodRecord) {
        _bloodRecord = bloodRecord;
        [self addDataSourceWithBloodRecord:_bloodRecord];
    }
}
#pragma  mark- 根据数据添加数组值
-(void)addDataSourceWithBloodRecord:(BloodRecord *)bloodRecord
{
    if (![bloodRecord.b0 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"凌晨3点";
        blood.value = bloodRecord.b0;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b1 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"空腹血糖";
        blood.value = bloodRecord.b1;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b2 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"早餐餐后2小时";
        blood.value = bloodRecord.b2;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b3 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"午餐餐前";
        blood.value = bloodRecord.b3;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b4 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"午餐餐后2小时";
        blood.value = bloodRecord.b4;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b5 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"晚餐餐前";
        blood.value = bloodRecord.b5;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b6 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"晚餐餐后2小时";
        blood.value = bloodRecord.b6;
        [_tableViewMArr addObject:blood];
    }
    if (![bloodRecord.b7 isEqualToString:@"0"]) {
        Blood *blood = [[Blood alloc] init];
        blood.timer = @"睡前血糖";
        blood.value = bloodRecord.b7;
        [_tableViewMArr addObject:blood];
    }
    NSLog(@"%@", _tableViewMArr);
    self.frame = CGRectMake(0, 0, self.frame.size.width, 28 * _tableViewMArr.count + 38 + 20);

    [_tableView reloadData];
}
#pragma  mark- UITableView delegate
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *str = @"reuse";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:str];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:str ];
    }
    Blood *blood = [_tableViewMArr objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont systemFontOfSize:13];
    cell.detailTextLabel.font = [UIFont systemFontOfSize:13];
    cell.textLabel.textColor = RGB(253, 110, 115);
    cell.detailTextLabel.textColor = RGB(253, 110, 115);
    cell.textLabel.text = blood.timer;
    cell.detailTextLabel.text = blood.value;
    return cell;
    
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _tableViewMArr.count;
}
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end
